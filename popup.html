<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="index.css">
</head>

<body>
  <div class="container">
    <!-- PIN Setup Section -->
    <div id="setup-screen" class="hidden" style="text-align: center; padding-top: 40px;">
      <div class="logo-container" style="margin-bottom: 32px;">
        <img src="images/icon128.png" alt="Logo"
          style="height: 100px; border-radius: 20px; box-shadow: 0 12px 40px rgba(88, 166, 255, 0.3); animation: float 3s ease-in-out infinite;">
        <div style="margin-top: 16px;">
          <h2 style="margin-bottom: 8px; background: linear-gradient(135deg, var(--accent-primary), var(--accent-hover)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">QuickVault</h2>
          <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">Secure Vault Extension</p>
        </div>
      </div>
      <div class="setup-card" style="background: var(--glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: var(--border-radius); padding: 32px; margin: 0 auto; max-width: 300px; box-shadow: var(--glass-shadow);">
        <p
          style="color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 32px; line-height: 1.6;">
          ğŸ” Securely store your secrets and snippets with local encryption.
          <br><br>
          Please set a PIN to get started.
        </p>
        <div class="input-stack">
          <input type="password" id="new-pin" placeholder="ğŸ”‘ Create Secure PIN"
            style="text-align: center; font-size: 1.2rem; letter-spacing: 0.3rem; font-weight: 600;">
        </div>
        <button id="save-pin" class="primary" style="height: 56px; margin-top: 20px; font-size: 0.95rem;">
          ğŸš€ Initialize Vault
        </button>
      </div>
    </div>

    <!-- Main App Section -->
    <div id="main-screen" class="hidden">
      <header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding: 16px; background: var(--glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: var(--border-radius); box-shadow: var(--glass-shadow);">
        <div style="display: flex; align-items: center; gap: 12px;">
          <img src="images/icon48.png" alt="Logo"
            style="height: 42px; border-radius: 10px; box-shadow: 0 6px 20px rgba(88, 166, 255, 0.3);">
          <div>
            <h2 style="margin: 0; font-size: 1.1rem; background: linear-gradient(135deg, var(--accent-primary), var(--accent-hover)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">QuickVault</h2>
            <p style="margin: 0; font-size: 0.75rem; color: var(--text-secondary);">Secure Extension</p>
          </div>
        </div>
        <div style="display: flex; gap: 8px;">
          <button id="unlock-secrets-btn" class="icon-btn" title="Open Secrets"
            style="background: var(--glass-bg); backdrop-filter: blur(10px); border: 1px solid var(--glass-border);">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
              <path d="M7 11V7a5 5 0 0 1 10 0v4" />
            </svg>
          </button>
          <button id="settings-toggle-btn" class="icon-btn" title="Settings"
            style="background: var(--glass-bg); backdrop-filter: blur(10px); border: 1px solid var(--glass-border);">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="3" />
              <path
                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
          </svg>
        </button>
      </div>
    </header>

    <!-- Primary View: Quick Paste -->
    <div id="notes-view">
      <div class="section">
        <h3 style="display: flex; align-items: center; gap: 8px; margin-bottom: 20px;">
          <span style="font-size: 1.2rem;">ğŸ“‹</span>
          Quick Paste
          <span style="margin-left: auto; font-size: 0.75rem; color: var(--text-secondary); background: var(--glass-bg); padding: 4px 8px; border-radius: 12px;">
            <span id="notes-count">0</span> items
          </span>
        </h3>
        <div id="notes-container">
          <div class="controls" style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
            <div style="flex-grow: 1; position: relative;">
              <input type="text" id="note-input" placeholder="ğŸ“ Paste or type item to save..."
                style="height: 48px; padding-left: 16px; font-size: 0.95rem;">
              <div style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); color: var(--text-secondary); font-size: 0.8rem;">
                Ctrl+V
              </div>
            </div>
            <button id="add-note" class="primary"
              style="width: 48px; height: 48px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;"
              title="Save Paste">
              âœ¨
            </button>
          </div>
          <div id="notes-list" style="min-height: 100px;">
            <div style="text-align: center; padding: 40px 20px; color: var(--text-secondary);">
              <div style="font-size: 2rem; margin-bottom: 12px; opacity: 0.5;">ğŸ“­</div>
              <p style="margin: 0; font-size: 0.9rem;">No items yet. Add your first paste!</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Secrets View (Locked/Unlocked) -->
    <div id="secrets-view" class="hidden">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 24px; padding: 16px; background: var(--glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: var(--border-radius);">
        <button class="back-btn icon-btn"
          style="background: var(--glass-bg); backdrop-filter: blur(10px); border: 1px solid var(--glass-border);">
          â†
        </button>
        <div style="display: flex; align-items: center; gap: 8px; flex-grow: 1;">
          <span style="font-size: 1.3rem;">ğŸ”</span>
          <h3 style="margin: 0;">Vault Secrets</h3>
        </div>
        <span id="secrets-status" style="font-size: 0.8rem; color: var(--text-secondary); background: rgba(248, 81, 73, 0.2); color: var(--danger); padding: 4px 8px; border-radius: 12px; font-weight: 600;">
          ğŸ”’ Locked
        </span>
      </div>
      <div id="secrets-content" class="section">
        <div style="text-align: center; padding: 40px 20px;">
          <div style="font-size: 3rem; margin-bottom: 16px; opacity: 0.6;">ğŸ”’</div>
          <h4 style="margin-bottom: 12px; color: var(--text-primary);">Enter PIN to Unlock</h4>
          <input type="password" id="secrets-pin" placeholder="Enter your PIN" 
            style="max-width: 200px; margin: 0 auto 20px; text-align: center; font-size: 1.1rem; letter-spacing: 0.2rem;">
          <button id="unlock-secrets" class="primary" style="max-width: 200px; margin: 0 auto;">
            ğŸ”“ Unlock Vault
          </button>
        </div>
      </div>
    </div>

    <!-- Settings View -->
    <div id="settings-view" class="hidden">
      <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 24px; padding: 16px; background: var(--glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: var(--border-radius);">
        <button class="back-btn icon-btn"
          style="background: var(--glass-bg); backdrop-filter: blur(10px); border: 1px solid var(--glass-border);">
          â†
        </button>
        <div style="display: flex; align-items: center; gap: 8px;">
          <span style="font-size: 1.3rem;">âš™ï¸</span>
          <h3 style="margin: 0;">Settings & Backup</h3>
        </div>
      </div>
      
      <div class="settings-group">
        <label class="group-label">ğŸ” Security Settings</label>
        <div class="input-stack">
          <input type="password" id="current-pin-input" placeholder="ğŸ”‘ Current PIN">
          <input type="password" id="new-pin-input" placeholder="ğŸ†• New PIN">
        </div>
        <button id="change-pin-btn" class="primary">
          ğŸ”„ Update PIN
        </button>
      </div>

      <div class="settings-group">
        <label class="group-label">ğŸ’¾ Data Management</label>
        <div class="btn-group-full">
          <button id="export-btn" class="secondary-btn">
            <span style="margin-right: 8px;">ğŸ“¤</span>
            Export
          </button>
          <button id="import-trigger-btn" class="secondary-btn">
            <span style="margin-right: 8px;">ğŸ“¥</span>
            Import
          </button>
          <input type="file" id="import-input" accept=".json" class="hidden">
        </div>
      </div>

      <div class="settings-group">
        <label class="group-label" style="color: var(--danger);">âš ï¸ Danger Zone</label>
        <button id="clear-notes-btn" class="danger-btn block-btn">
          <span style="margin-right: 8px;">ğŸ—‘ï¸</span>
          Clear All Pastes
        </button>
      </div>
    </div>
  </div>

  <!-- Custom Confirmation Modal -->
  <div id="confirm-modal" class="modal hidden">
    <div class="modal-content">
      <h3 id="modal-title">Confirm</h3>
      <p id="modal-message">Are you sure you want to proceed?</p>
      <div class="modal-actions">
        <button id="modal-cancel">Cancel</button>
        <button id="modal-confirm" class="danger-btn">Delete</button>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>

</html>